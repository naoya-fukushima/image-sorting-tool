# 顔画像仕分けツール

## 概要

このツールは、指定された人ごとに顔写真を自動で仕分けするツールです。

## フォルダ構成

---

```
顔画像仕分けツール/
├── setup.sh                 ← ★1回だけ実行して仮想環境＆ライブラリを作る
├── 01_仕分け開始.command   ← ダブルクリックで実行（何度でも使える）
├── 01_仕分け開始.py        ← 自動で使われる（触らない）
├── requirements.txt         ← 必要なライブラリ一覧
└── face_sorter/
    ├── reference_faces/     ← 正解データ（人物ごとの写真 この下に人物名でフォルダを作ってください）
    ├── input_images/        ← 振り分けたい写真を入れる場所
    ├── sorted_images/       ← 自動で出力される（仕分け結果）
```

---

##コマンド関係

### Python のバージョン確認

python3 --version

## 初回セットアップ

1. python-installer.pkg をインストール(ある人はスキップ)
2. Finder で `顔画像仕分けツール` フォルダを開く
3. フォルダの中で右クリック →「新規ターミナルでフォルダを開く」  
   ※または「ターミナルで開く」が出ない場合は、ターミナルを開いて `cd` でフォルダまで移動します
4. ターミナルで以下のコマンドを順番に入力(実行権限を付与)：

```bash
chmod +x setup.sh
chmod +x 01_仕分け開始.command
```

5. setup.sh を右クリック → 「ターミナルで開く」
6. 実行が完了したら、次からは 01\_仕分け開始.command をダブルクリックで OK

## 使用手順

1. `face_sorter/input_images/` フォルダに仕分け対象の画像を入れます
2. フォルダの中にある `01_仕分け開始.command` を **ダブルクリック** します。
3. 自動で仕分けが始まり、`sorted_images` に結果が保存されます

---

## 補足事項
- 正解データの画像ファイルで使える拡張子は以下
 - jpg, jpeg, png
- 画像に顔が写っていない、または識別できなかった場合は `unknown` フォルダに入ります
- 1 枚も顔を識別できなかった人物のフォルダは `sorted_images` 内に作成されません。（仕分けが行われていないので）
- エラーが発生した場合、`copy_failed.log` にファイル名が記録されます
- 同じ画像が既に仕分け先にある場合はスキップされます

---

## 仕分けをやり直したい場合

- `input_images/` フォルダの画像を削除または差し替える
- `sorted_images/` フォルダを空にすることで再仕分けが可能です

---
